<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="d3.min.js"></script>
    
    <script src="script.js"></script>
    <script src="data/people.json"></script>

<link href='https://fonts.googleapis.com/css?family=Roboto+Slab:400,700,300,100' rel='stylesheet' type='text/css'>
    <title>Dashboard</title>

<style>

div{
  margin: 50px;
}

svg{
    background-color: #dddddd;
    padding: 20px;
}

.box{
    width:100%;
}

#graphTitle{
  font-family: 'Roboto Slab', serif;
  font-size: 50px;
}


</style>
</head>

<body>


<div></div>

<script>

var frameWidth = 500;
var frameHeight = 500;

var rectWidth = 10;
var rectHeight = 10;

var colours = ["red", "green", "purple", "orange", "blue"]




d3.json('data/people.json', function(data){

    //Pull in the data from the specified URL, then pushes it to arrays which can be read by the drawing code
    var currentDataAge = [];    
    for (i = 0; i < data.length; i++){
        currentDataAge.push(data[i].age)
    };
    var currentDataIncome = [];
    for (i = 0; i < data.length; i++){
        currentDataIncome.push(data[i].income)
    };

    //Create scale vars that are used in place of data values.
    var yScale = d3.scale.linear(data)
                    .domain([0, d3.max(currentDataIncome)])
                    .range([0, frameHeight]);

    var xScale = d3.scale.linear(data)
                    .domain([0, d3.max(currentDataAge)])
                    .range([0, frameWidth]);


    //
    var xAxis = d3.svg.axis()
                .scale(xScale);
       

    //Create frame to draw SVG stuff in
    var frame = d3.select('div')
            .append('svg')
            .attr('width', frameWidth)
            .attr('height', frameHeight)

    //Creates a string 'translate(0, frameHeight)' which can be used as an attr argument    
    var translateFrameHeight = "translate(0, " + frameHeight + ")"  ;
    frame.append('g')
            .attr('transform', translateFrameHeight)
            .call(xAxis);


    //Draws the SVG points on the frame according to the data being fed in, augmented by the scale
    var points = frame.selectAll('rect') 
                    .data(data)                      
                    .enter()
                        .append("rect")
                        .attr('width', rectWidth)
                        .attr('height', rectHeight)
                        .attr('x', function(d){
                          return xScale(d.age) - rectWidth;
                        })
                        .attr('y', function(d){
                          return frameHeight - yScale(d.income);
                        })
                        .style("fill", function(d, i){
                            return colours[i];
                        });
      
});





//Pull in the data from the specified URL, then pushes it to arrays which can be read by the drawing code

// var currentDataAge = [];
// var currentDataIncome = [];

// for (i = 0; i < data.length; i++){
//     currentDataAge.push(data[i].age)
// }

// for (i = 0; i < data.length; i++){
//     currentDataIncome.push(data[i].income)
// }
     

</script>

</body>
</html>